---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
options(digits = 2, width = 100)
```
# mscpredmodel

The goal of mscpredmodel is to make external validation and comparison of prediction models via the network meta-analytic approach multiple score comparison (MSC) straightforward for researchers involved in systematic reviews and (network) meta-analysis of prediction models.

## Installation

You can install the released version of mscpredmodel from [github](https://github.com/) with:

``` r
devtools::install_github("srhaile/mscpredmodel")
```

## Example

This is a basic example which shows you a typical analysis for a dataset having individual patient data for 30 cohorts, each with some combination of scores a, b, c, e, and g. The example here has only 25 bootstrap samples to speed up the runtime, but an actual analysis should use more.

```{r example, out.width = "60%"}
library(mscpredmodel)
library(ggplot2)
theme_set(theme_bw())

dat <- msc_sample_data(n.cohorts = 10)
head(dat)

get_performance_statistics(data = dat, 
                          scores = c("a", "b", "c", "e", "g"), 
                          cohort = "study", outcome = "outcome", 
                          fn = list(AUC = c_statistic, 
                                    `O/E` = oe_ratio,
                                    BS = brier_score))

mod <- msc(scores = c("a", "b", "c", "e", "g"),
           outcome = "outcome", subjid = "id",
           cohort = "study", mods = NULL, data = dat,
           fn = list("AUC" = c_statistic,
                     "CS" = calibration_slope,
                     "BS" = brier_score),
           model = "consistency", direct = FALSE, indirect = FALSE,
           ref = "first")
mod
plot(mod)

check_homogeneity(mod)

```

